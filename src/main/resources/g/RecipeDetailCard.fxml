<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/11.0.1"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="g.controller.RecipeDetailCardController"
    maxWidth="Infinity" maxHeight="Infinity"
    spacing="0"
    style="-fx-background-color: #f8f9fa; -fx-padding: 0;">
    <StackPane
        style="-fx-background-color: white; -fx-background-radius: 16; -fx-effect: dropshadow(gaussian, #b0b0b0, 12, 0.2, 0, 2); -fx-padding: 0 0 16 0; -fx-max-width: 320;">
        <VBox spacing="0" style="-fx-background-radius: 16;">
            <HBox spacing="8" alignment="CENTER_LEFT" style="-fx-padding: 16 16 8 16;">
                <Button fx:id="recipeBackButton" text="←" onAction="#onBackClicked"
                    style="-fx-background-radius: 8; -fx-background-color: #e9ecef; -fx-font-size: 16;" />
                <Region fx:id="spacer" HBox.hgrow="ALWAYS" />
                <Button fx:id="recipeCategorizeButton" text="❤"
                    onAction="#onRecipeCategorizeClicked"
                    style="-fx-background-radius: 8; -fx-background-color: #ffe5ec; -fx-text-fill: #d6336c;" />
                <Button fx:id="recipeUpdateButton" text="✎" onAction="#onRecipeUpdateClicked"
                    style="-fx-background-radius: 8; -fx-background-color: #e7f5ff; -fx-text-fill: #228be6;" />
                <Button fx:id="recipeDeleteButton" text="🗑" onAction="#onRecipeDeleteClicked"
                    style="-fx-background-radius: 8; -fx-background-color: #fff3f3; -fx-text-fill: #fa5252;" />
            </HBox>

            <Separator style="-fx-background-color: #dee2e6;" />
            <VBox spacing="14" style="-fx-padding: 18 24 18 24;">
                <Label text="Recipe Details"
                    style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #495057;" />

                <GridPane hgap="8" vgap="10">
                    <columnConstraints>
                        <ColumnConstraints halignment="RIGHT" minWidth="90" />
                        <ColumnConstraints halignment="LEFT" minWidth="160" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints minHeight="24" />
                        <RowConstraints minHeight="24" />
                        <RowConstraints minHeight="24" />
                        <RowConstraints minHeight="24" />
                        <RowConstraints minHeight="24" />
                        <RowConstraints minHeight="24" vgrow="ALWAYS" /> <!-- Ingredients -->
                        <RowConstraints minHeight="24" vgrow="ALWAYS" /> <!-- Instructions -->
                        <RowConstraints minHeight="24" />
                    </rowConstraints>
                    <children>
                        <Label text="ID:" style="-fx-text-fill: #868e96;" />
                        <Label fx:id="recipeIdLabel" GridPane.columnIndex="1"
                            style="-fx-font-weight: bold;" />
                        <Label text="Title:" style="-fx-text-fill: #868e96;" GridPane.rowIndex="1" />
                        <Label fx:id="title" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <Label text="Prep Time:" style="-fx-text-fill: #868e96;"
                            GridPane.rowIndex="2" />
                        <Label fx:id="prepTime" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        <Label text="Cook Time:" style="-fx-text-fill: #868e96;"
                            GridPane.rowIndex="3" />
                        <Label fx:id="cookTime" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                        <Label text="Servings:" style="-fx-text-fill: #868e96;" GridPane.rowIndex="4" />
                        <Spinner fx:id="serveSpinner" GridPane.columnIndex="1" GridPane.rowIndex="4"
                            editable="true" minWidth="80" />

                        <Label text="Ingredients:" style="-fx-text-fill: #868e96;" GridPane.rowIndex="5" />
                        <TableView fx:id="ingredientsTable" GridPane.columnIndex="1" GridPane.rowIndex="5"
                                   GridPane.columnSpan="2"
                                   prefHeight="160" minWidth="200" editable="false">
                            <columns>
                                <TableColumn fx:id="ingredientNameCol" text="食材" prefWidth="100"/>
                                <TableColumn fx:id="ingredientAmountCol" text="用量" prefWidth="80"/>
                                <TableColumn fx:id="ingredientUnitCol" text="单位" prefWidth="80"/>
                            </columns>
                        </TableView>
                        <Label text="Instructions:" style="-fx-text-fill: #868e96;"
                            GridPane.rowIndex="6" />
                        <TitledPane text="点击展开/收起" GridPane.columnIndex="1" GridPane.rowIndex="6"
                            expanded="false">
                            <content>
                                <Label fx:id="instructions" wrapText="true" />
                            </content>
                        </TitledPane>
                        <Label text="Image:" style="-fx-text-fill: #868e96;" GridPane.rowIndex="7" />
                        <Label fx:id="imgAddr" GridPane.columnIndex="1" GridPane.rowIndex="7"
                            wrapText="true" />
                    </children>
                </GridPane>
            </VBox>
        </VBox>
    </StackPane>
</VBox>